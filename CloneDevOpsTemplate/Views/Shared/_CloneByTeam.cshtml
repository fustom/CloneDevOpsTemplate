@model Tuple<Team[],string, string>

<h2 class="text-success">@ViewBag.SuccessMessage</h2>

<script>
    var model = @Html.Raw(Json.Serialize(Model.Item1));

    function onTeamChanged()
    {
        let templateProjectId = model.find(i => i.id == templateTeamId.value).projectId;
        $('#templateProjectId').val(templateProjectId);
        let projectId = model.find(i => i.id == projectTeamId.value).projectId;
        $('#projectId').val(projectId);
    }
</script>

@Html.ValidationSummary(false, "", new { @class = "text-danger" })

@using (Html.BeginForm(Model.Item3, Model.Item2, FormMethod.Post, new { @class = "form-container card input-group-lg" }))
{
    @Html.Hidden("templateProjectId")
    @Html.Hidden("projectId")
    @Html.DropDownList("templateTeamId", new SelectList(Model.Item1, "Id", "Name"), "Select a team", new { @class = "form-select form-control", @onChange = "onTeamChanged()" })
    @Html.DropDownList("projectTeamId", new SelectList(Model.Item1, "Id", "Name"), "Select a team", new { @class = "form-select form-control", @onChange = "onTeamChanged()" })
    <button type="submit" class="btn btn-primary form-button form-text">Clone</button>
}
